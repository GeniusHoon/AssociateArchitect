@startuml
hide empty members

' Boundaries
package "Boundary" {
  interface UserInterface
  interface GatewayInterface
  interface PowerCompanyInterface
  interface NotificationInterface
  interface DeviceInterface
}

' Controls
package "Control" {
  class PredictionController
  class DeviceControlController
  class AnomalyDetectionController
  class DataManager
  class GatewayController
  class ScheduleManager
}

' Entities
package "Entity" {
  class PowerUsageData {
    + userID: string
    + timestamp: datetime
    + usage: float
  }
  class PricingPlan {
    + planID: string
    + details: string
  }
  class DeviceStatus {
    + deviceID: string
    + status: string
  }
  class AnomalyLog {
    + logID: string
    + timestamp: datetime
    + details: string
  }
  class UserProfile {
    + userID: string
    + name: string
  }
  class controlSchedule {
   + scheduleID: string
   + deviceID: string
   + command: string
   + executionTime: datetime
  }
}

' Application Logic
package "Application Logic" {
  class PredictionModel
  class OptimizationEngine
  class AnomalyDetectionModel
  class CommandExecutor
}

' Relationships

' User -> System
UserInterface "1" -- "1" PredictionController
UserInterface "1" -- "1" DeviceControlController

' Prediction Flow
PredictionController "1" -- "1" DataManager
PredictionController "1" -- "1" PowerCompanyInterface
PredictionController "1" -- "1" PredictionModel
PredictionController "1" -- "1" OptimizationEngine
PredictionController "1" -- "1" ScheduleManager

' Control Flow
DeviceControlController "1" -- "1" GatewayController
DeviceControlController "1" -- "1" DataManager
GatewayController "1" -- "1" CommandExecutor
CommandExecutor "1" -- "*" DeviceInterface
GatewayController "1" -- "1" DeviceStatus

' Anomaly Flow
GatewayController "1" -- "1" AnomalyDetectionModel
GatewayController "1" -- "1" AnomalyDetectionController
AnomalyDetectionController "1" -- "1" NotificationInterface
AnomalyDetectionController "1" -- "1" DataManager

' Data Management & Scheduling
DataManager "1" -- "*" PowerUsageData
DataManager "1" -- "*" PricingPlan
DataManager "1" -- "*" UserProfile
DataManager "1" -- "*" AnomalyLog
ScheduleManager "1" -- "*" controlSchedule

@enduml